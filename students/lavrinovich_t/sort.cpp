#include <iostream>



using namespace std;

//�������� ��������� ������������������
int SedgewickAlg(int size, int *d)
// d ������, � ������� ��������� ����������
// size ����������� ����� �������
{
  int p1, p2, p3, i;

  p1 = p2 = p3 = 1;
  i = -1;
  do {// ��������� ������ ��������� �� ������� ������� ��������
    if (++i % 2)
      d[i] = 8*p1 - 6*p2 + 1;
	else
	{
      d[i] = 9*p1 - 9*p3 + 1;
      p2 *= 2;
      p3 *= 2;
	}
	p1 *= 2;
	// ��������� ������, ���� ������� ���������� ���� ��
	// � 3 ���� ������ ���������� ��������� � �������
  } while(3*d[i] < size);  

  // ���������� ���������� ��������� � �������
  return (i > 0) ? (--i) : (0);
  
}

template<class AnyClass>					//������ ��� ������������� ������ ���� ������ � �������
void shellSort(AnyClass *a, int size) {
// inc ���������, ���������� ����� ���������� ���������
// i � j ����������� ���������� �����
// d[40] ������, � ������� �������� ����������
	int inc = 0, d[40];
	int i = 0, j = 0;
	int s = 0;//���������� ��������� � ������� d[40]

	// ���������� ������������������ ����������
	s = SedgewickAlg(size, d);
	while (s >= 0) 
	{
		//��������� �� ������� ��������� ����������
		inc = d[s--];
		
		// ���������� ��������� � ������������ inc
		for (i = inc; i < size; i++) 
		{
			AnyClass temp = a[i];
			// �������� �������� �� ��� ���, ���� �� ������
			// �� ����� ��� �� ���������� � ������ �������
			for (j = i-inc; (j >= 0) && (a[j] > temp); j -= inc)
				a[j+inc] = a[j];
		// ����� ���� ������� ������ �� ����� j+inc �������, 
		// ������� ��������� �� i �����
			a[j+inc] = temp;
		}
	}
}

int main()
{
	int n = 0;
	cout<<"Input size of array.\n";
	cin>>n;

	int *a = new int[n];

	cout<<"Input your array.\n";
	for (int i = 0; i < n; i++)
		cin>>a[i];

	shellSort(a, n);

	for (int i = 0; i < n; i++)
		cout<<a[i]<<" ";
	return 0;
}
